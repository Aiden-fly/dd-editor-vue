!function(){"use strict";var e={444:function(e,t,n){n.d(t,{default:function(){return P}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[e.toolbar?n("div",{staticStyle:{"margin-bottom":"20px"}},[n("tree-header")],1):e._e(),e._v(" "),n("node",{attrs:{dataTree:e.treeData,"render-content":e.renderContent,editorEnable:e.editorEnable}})],1)};r._withStripped=!0;var o,i=JSON.parse('[{"id":0,"parentId":-1,"name":"node","type":1,"children":[{"id":1,"parentId":0,"name":"node1","type":2,"children":[{"id":111,"parentId":1,"name":"node111","type":3},{"id":112,"parentId":1,"name":"node112","type":4}]}]}]'),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dde-node-wraper"},e._l(e.dataTree,(function(t){return n("div",{key:t.id,class:[e.isChild?"dde-tree-childNodes-row":"dde-tree",{"dde-tree-multiply-node":e.dataTree.length>1}]},[n("span",{class:{"dde-tree-node":!0,"dde-tree-leaf-node":!t.children},staticStyle:{cursor:"pointer"}},[e.editorEnable?n("span",{staticClass:"dde-icon-clear",on:{click:function(n){return e.onDelete(t)}}}):e._e(),e._v(" "),e.editorEnable?n("node-content",{attrs:{node:t}}):n("span",[e._v(e._s(t.name))]),e._v(" "),e.editorEnable?n("span",{staticClass:"dde-icon-add",staticStyle:{cursor:"pointer"},on:{click:function(n){return e.onAdd(t)}}}):e._e()],1),e._v(" "),t.children?n("div",{staticClass:"dde-tree-childNodes"},[n("node",{attrs:{dataTree:t.children,isChild:!0,"render-content":e.renderContent,editorEnable:e.editorEnable}})],1):e._e()])})),0)};a._withStripped=!0;var c=new Uint8Array(16);function d(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(c)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&s.test(e)},l=[],f=0;f<256;++f)l.push((f+256).toString(16).substr(1));var p=function(e,t,n){var r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n}(r)};function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){var n=JSON.parse(JSON.stringify(e)),r={},o=[];n.forEach((function(e){r[e.id]=e}));for(var i=0,a=n.length;i<a;i++){var c=n[i].parentId;c===t?o.push(n[i]):r[c].children?r[c].children.push(n[i]):r[c].children=[n[i]]}return o}var m,y,b,g,S,_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.items={}}var t,n;return t=e,(n=[{key:"size",value:function(){return this.count}},{key:"isEmpty",value:function(){return 0===this.count}},{key:"push",value:function(e){this.items[this.count]=e,this.count++}},{key:"pop",value:function(){if(!this.isEmpty()){this.count--;var e=this.items[this.count];return delete this.items[this.count],e}}}])&&h(t.prototype,n),e}(),O=(m={},{subscribe:function(e,t){void 0===m[e]?m[e]=[t]:m[e].push(t)},unSubScribe:function(e,t){if(m[e]instanceof Array)for(var n=m[e].length-1;n>=0;n--)m[e][n]===t&&m[e].splice(n,1)},dispatch:function(e,t){if(m[e])for(var n={type:e,args:t||{}},r=0;r<m[e].length;r++)m[e][r].call(this,n)}}),C=(y=[],b=new _,g=new _,S={init:function(e){y=function(e){var t=[],n=[];for(t=t.concat(e);t.length;){var r=t.shift();r.children&&(t=t.concat(r.children),delete r.children),n.push(r)}return n}(y=JSON.parse(JSON.stringify(Object.assign([],e))))},add:function(e){var t=JSON.parse(JSON.stringify(y));b.push(t),console.log("undoStack=",b),y.push(e),S.retrieve()},update:function(e){var t=JSON.parse(JSON.stringify(y)).map((function(t){return t.id===e.id?e:t}));y=function(e){for(var t=0;t<e.length;t++)for(var n=n+1;n<e.length;n++)e[t].id===e[n].id&&(e.splice(n,1),n--);return e}(t),S.retrieve()},delete:function(e){var t=JSON.parse(JSON.stringify(y));b.push(t);var n=function(e,t){var n=[],r=[];for(n=n.concat(e);n.length;){var o=n.shift();o.id!==t.id&&(o.children&&(n=n.concat(o.children),delete o.children),r.push(o))}return r}(v(y,-1),e);y=n,S.retrieve()},undo:function(){if(!b.isEmpty()){var e=JSON.parse(JSON.stringify(y));g.push(e),y=b.pop(),S.retrieve()}},redo:function(){if(!g.isEmpty()){var e=JSON.parse(JSON.stringify(y));b.push(e),y=g.pop(),S.retrieve()}},retrieve:function(){var e=v(y,-1);return O.dispatch("tree",{msg:e}),e}},{excute:function(e){if(e)if(e.length)for(var t=0;t<e.length;t++)this(e[t]);else S[e.command].call(S,e.param)},stack:{undoStack:b,redoStack:g}}),w=function(e){e.children&&delete e.children,C.excute({command:"update",param:e})};function E(e,t,n,r,o,i,a,c){var d,s="function"==typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=n,s._compiled=!0),r&&(s.functional=!0),i&&(s._scopeId="data-v-"+i),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},s._ssrRegister=d):o&&(d=c?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(s.functional){s._injectStyles=d;var u=s.render;s.render=function(e,t){return d.call(t),u(e,t)}}else{var l=s.beforeCreate;s.beforeCreate=l?[].concat(l,d):[d]}return{exports:e,options:s}}var k=E({name:"node",props:{dataTree:{type:Array,default:function(){return[]}},isChild:{type:Boolean,default:!1},renderContent:Function,editorEnable:{type:Boolean,default:!1}},components:{NodeContent:{props:{node:{require:!0}},render:function(){return this.$parent.renderContent(this.node,w)}}},mounted:function(){},methods:{onAdd:function(e){var t={id:p().replace(/-/g,""),parentId:e.id,name:p().replace(/-/g,"")};C.excute({command:"add",param:t})},onDelete:function(e){C.excute({command:"delete",param:e})}}},a,[],!1,null,null,null);k.options.__file="packages/dd-treenode/Node.vue";var N=k.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dde-header-wraper"},[n("i",{class:{"dde-toolbar-icon":!0,"dde-icon-undo":!0,"dde-toolbar-icon-default":e.useShare.stack.undoStack.count<=0},on:{click:e.undo}}),e._v(" "),n("i",{class:{"dde-toolbar-icon":!0,"dde-icon-redo":!0,"dde-toolbar-icon-default":e.useShare.stack.redoStack.count<=0},on:{click:e.redo}}),e._v(" "),n("i",{staticClass:"dde-toolbar-icon dde-icon-zoomin",on:{click:e.onZoomIn}}),e._v(" "),n("i",{staticClass:"dde-toolbar-icon dde-icon-zoomout",on:{click:e.onZoomOut}})])};j._withStripped=!0;var x=E({name:"TreeHeader",data:function(){return{useShare:C,scaleCount:1}},mounted:function(){var e=this;O.subscribe("tree",(function(){e.useShare=C}))},methods:{setZoom:function(e,t){e.$el.setAttribute("style","transform:scale(".concat(t,");transform-origin:left top;"))},changeSize:function(e){switch(e.type){case"increment":var t=this.scaleCount+.1;this.setZoom(e.ref,t),this.scaleCount=t;break;case"decrement":if(this.scaleCount<=.8)return!1;var n=this.scaleCount-.1;n<=.1&&(this.scaleCount=.1),this.setZoom(e.ref,n),this.scaleCount=n;break;default:throw new Error}},onZoomIn:function(){this.changeSize({type:"increment",ref:this.$parent.$children[1]})},onZoomOut:function(){this.changeSize({type:"decrement",ref:this.$parent.$children[1]})},undo:function(){C.excute({command:"undo"})},redo:function(){C.excute({command:"redo"})}}},j,[],!1,null,null,null);x.options.__file="packages/dd-treenode/Header.vue";var T=x.exports,$=E({name:"dd-treenode",props:{dataTree:{type:Array,default:function(){return i}},renderContent:Function,editorEnable:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1}},data:function(){return{treeData:this.dataTree}},components:{Node:N,treeHeader:T},mounted:function(){var e=this;C.excute({command:"init",param:this.dataTree}),O.subscribe("tree",(function(t){e.treeData=t.args.msg}))}},r,[],!1,null,null,null);$.options.__file="packages/dd-treenode/index.vue";var J=$.exports;J.install=function(e){e.component(J.name,J)};var P=J}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){e(n,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}n.r(r),n.d(r,{default:function(){return c}});var i=[n(444).default],a=function(e){i.forEach((function(t){e.component(t.name,t)}))};"undefined"!=typeof window&&window.Vue&&a(window.Vue);var c=o(o({install:a},i),{},{version:"1.0.4"})}(),module.exports=r}();
//# sourceMappingURL=index.js.map